extends layout

block content
  .page-header
    h1= thread.topic
      small  opened at #{moment(thread.created).format('YYYY-MM-DD')}
        | from #{thread.creator.displayName || thread.creator.username}
      if user._id.toString() == thread.creator._id.toString()
        a.close(href="/thread/#{thread._id}/remove", style="line-height:2") &times;

  each post in posts
    .row
      if user._id.toString() != post.author._id.toString()
        .col-sm-1
          img.img-circle(src=post.author.picture, height="64", width="auto")
      .col-sm-11
        .panel.panel-default
          .panel-heading #{post.author.displayName || post.author.username} wrote
            | at #{moment(post.created).format('YYYY-MM-DD hh:mm')}:
            if user._id.toString() == post.author._id.toString()
              a.close(href="/thread/#{thread._id}/post/#{post._id}/remove") &times;
          .panel-body= post.body
      if user._id.toString() == post.author._id.toString()
        .col-sm-1
          img.img-circle(src=post.author.picture, height="64", width="auto")

  hr

  .col-md-8.col-md-offset-2(style="margin-bottom:32px")
    h3 New Post
    form(action="/thread/#{thread._id}/post/new", method="post")
      textarea.form-control(name="body", placeholder="Your message", rows="4", style="margin-bottom:12px")
      input.btn.btn-success.pull-right(type="submit", value="Post")
